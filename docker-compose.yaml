version: "3.9"

services:

  reverse-proxy:
    build: reverse-proxy
    ports:
        - "80:80"
        - "443:443"
    volumes:
      - ./certs:/certs

  api:
    build: api
    environment:
      USERNAME: tom
      PASSWORD: password
    expose:
      - 50051

  web-api:
    build: web-api
    network_mode: host
    depends_on:
      - api